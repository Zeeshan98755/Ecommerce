<div class="min-h-screen bg-white flex items-center justify-center py-14 px-7">
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()"
        class="glass-card w-full max-w-3xl bg-white p-8 rounded-2xl shadow-lg border border-gray-200 hover:border-[#1e88e5] transition-all duration-500">

        <div class="flex flex-col items-center justify-center mt-10 space-y-6">
            <div class="relative group">
                <div
                    class="w-28 h-28 sm:w-32 sm:h-32 rounded-full border-4 border-dashed border-[#1e88e5] flex items-center justify-center transition-all duration-500 group-hover:scale-105 shadow-[0_0_15px_#1e88e533] bg-gray-100">

                    <img *ngIf="profileForm.get('image')?.value; else defaultAvatar"
                        [src]="profileForm.get('image')?.value" alt="Profile Image"
                        class="w-full h-full rounded-full object-cover" />

                    <ng-template #defaultAvatar>
                        <img src="https://cdn.pixabay.com/photo/2015/03/04/22/35/avatar-659651_640.png"
                            alt="Default Avatar" class="w-full h-full rounded-full object-cover" />
                    </ng-template>

                    <input type="file" id="imageInput" class="hidden" (change)="onImageSelected($event)"
                        accept="image/*" />
                </div>

                <label for="imageInput"
                    class="absolute bottom-0 right-0 transform translate-x-2 translate-y-2 bg-[#1e88e5] text-white p-2 rounded-full cursor-pointer shadow-md hover:bg-[#1565c0] transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 10.828M7 7h.01" />
                    </svg>
                </label>
            </div>

            <div class="text-center">
                <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 tracking-wide mb-1">
                    My Profile
                </h2>
                <p class="text-gray-500 text-sm">Update your personal information</p>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
            <div class="relative group">
                <input type="text" placeholder=" " formControlName="firstName" class="peer form-input" />
                <label class="form-label">First Name
                    <span *ngIf="f['firstName'].invalid || f['firstName'].errors?.['required']"
                        class="text-red-500">*</span>
                </label>
                <p *ngIf="(submitted || f['firstName'].touched) && f['firstName'].errors?.['required']"
                    class="error-text">This field is required</p>
            </div>

            <div class="relative group">
                <input type="text" placeholder=" " formControlName="lastName" class="peer form-input" />
                <label class="form-label">Last Name
                    <span *ngIf="f['lastName'].invalid || f['lastName'].errors?.['required']"
                        class="text-red-500">*</span>
                </label>
                <p *ngIf="(submitted || f['lastName'].touched) && f['lastName'].errors?.['required']"
                    class="error-text">This field is required</p>
            </div>
        </div>

        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="relative group">
                <input type="email" placeholder=" " formControlName="email" class="peer form-input" />
                <label class="form-label">Email
                    <span *ngIf="f['email'].invalid || f['email'].errors?.['required']" class="text-red-500">*</span>
                </label>
                <p *ngIf="(submitted || f['email'].touched) && f['email'].errors?.['required']" class="error-text">This
                    field is required</p>
                <p *ngIf="(submitted || f['email'].touched) && f['email'].errors?.['email']" class="error-text">Enter a
                    valid email</p>
            </div>

            <div class="relative group">
                <input type="text" placeholder=" " formControlName="address" class="peer form-input" />
                <label class="form-label">Address
                    <span *ngIf="f['address'].invalid || f['address'].errors?.['required']"
                        class="text-red-500">*</span>
                </label>
                <p *ngIf="(submitted || f['address'].touched) && f['address'].errors?.['required']" class="error-text">
                    This field is required</p>
            </div>
        </div>

        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="relative group">
                <div class="relative">
                    <input [type]="showPassword ? 'text' : 'password'" placeholder=" " formControlName="password"
                        class="peer form-input" />
                    <label class="form-label">Password
                        <span *ngIf="f['password'].invalid || f['password'].errors?.['required']"
                            class="text-red-500">*</span>
                    </label>
                    <button type="button" (click)="togglePasswordVisibility()"
                        class="absolute right-3 top-6 text-gray-400 hover:text-[#1e88e5] transition-colors duration-300">
                        <i [class]="showPassword ? 'fas fa-eye' : 'fas fa-eye-slash'"></i>
                    </button>
                </div>
                <p *ngIf="(submitted || f['password'].touched) && f['password'].errors?.['required']"
                    class="error-text">This field is required</p>
                <p *ngIf="(submitted || f['password'].touched) && f['password'].errors?.['minlength']"
                    class="error-text">Min 4 characters</p>
            </div>

            <div class="relative group">
                <input type="number" placeholder=" " formControlName="mobNumber" class="peer form-input" />
                <label class="form-label">Mobile Number
                    <span *ngIf="f['mobNumber'].invalid || f['mobNumber'].errors?.['required']"
                        class="text-red-500">*</span>
                </label>
                <p *ngIf="(submitted || f['mobNumber'].touched) && f['mobNumber'].errors?.['required']"
                    class="error-text">This field is required</p>
            </div>
        </div>

        <button type="submit"
            class="mt-10 !w-full py-3 btn-primary"
            [disabled]="profileForm.invalid">
            Update Profile
        </button>
    </form>
</div>