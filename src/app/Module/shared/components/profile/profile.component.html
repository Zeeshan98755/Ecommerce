<div
    class="min-h-screen bg-black bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 to-black flex items-center justify-center py-14 px-7">
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()"
        class="glass-card w-full max-w-3xl bg-transparent p-8 rounded-2xl shadow-lg shadow-[#69f0ae]/10 border border-gray-800 hover:border-[#69f0ae] transition-all duration-500">

        <div class="flex flex-col items-center justify-center mt-10 space-y-6">
            <div class="relative group">
                <div
                    class="w-28 h-28 sm:w-32 sm:h-32 rounded-full border-4 border-dashed border-[#69F0AE] flex items-center justify-center transition-all duration-500 group-hover:scale-105 shadow-[0_0_20px_#69F0AE55]">
                    <img *ngIf="profileForm.get('image')?.value; else defaultAvatar"
                        [src]="profileForm.get('image')?.value" alt="Profile Image"
                        class="w-full h-full rounded-full object-cover" />

                    <ng-template #defaultAvatar>
                        <img src="https://cdn.pixabay.com/photo/2015/03/04/22/35/avatar-659651_640.png"
                            alt="Default Avatar" class="w-full h-full rounded-full object-cover" />
                    </ng-template>
                    <input type="file" id="imageInput" class="hidden" (change)="onImageSelected($event)"
                        accept="image/*" />
                </div>

                <label for="imageInput"
                    class="absolute bottom-0 right-0 transform translate-x-2 translate-y-2 bg-[#69F0AE] text-black p-2 rounded-full cursor-pointer shadow-md hover:bg-[#4de1a0] transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828L18 10.828M7 7h.01" />
                    </svg>
                </label>
            </div>

            <div class="text-center">
                <h2 class="text-4xl font-extrabold text-[#69F0AE] tracking-wide mb-1">
                    My Profile
                </h2>
                <p class="text-gray-400 text-sm">Update your personal information</p>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="text" placeholder=" " formControlName="firstName" class="peer form-input" />
                        <label class="form-label">
                            First Name
                            <span *ngIf="f['firstName'].invalid || f['firstName'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['firstName'].touched) && f['firstName'].errors?.['required']"
                                class="error-text">This field is required</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="text" placeholder=" " formControlName="lastName" class="peer form-input" />
                        <label class="form-label">
                            Last Name
                            <span *ngIf="f['lastName'].invalid || f['lastName'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['lastName'].touched) && f['lastName'].errors?.['required']"
                                class="error-text">This field is required</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>

        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="email" placeholder=" " formControlName="email" class="peer form-input" />
                        <label class="form-label">
                            Email
                            <span *ngIf="f['email'].invalid || f['email'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['email'].touched) && f['email'].errors?.['required']"
                                class="error-text">This field is required</p>
                            <p *ngIf="(submitted || f['email'].touched) && f['email'].errors?.['email']"
                                class="error-text">Enter a valid email</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="text" placeholder=" " formControlName="address" class="peer form-input" />
                        <label class="form-label">
                            Address
                            <span *ngIf="f['address'].invalid || f['address'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['address'].touched) && f['address'].errors?.['required']"
                                class="error-text">This field is required</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>

        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="text" placeholder=" " formControlName="city" class="peer form-input" />
                        <label class="form-label">
                            City
                            <span *ngIf="f['city'].invalid || f['city'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['city'].touched) && f['city'].errors?.['required']"
                                class="error-text">This field is required</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="text" placeholder=" " formControlName="zipCode" class="peer form-input" />
                        <label class="form-label">
                            Zip Code
                            <span *ngIf="f['zipCode'].invalid || f['zipCode'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['zipCode'].touched) && f['zipCode'].errors?.['required']"
                                class="error-text">This field is required</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>

        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <div class="relative">
                            <input [type]="showPassword ? 'text' : 'password'" placeholder=" "
                                formControlName="password" class="peer form-input" />
                            <label class="form-label">
                                Password
                                <span *ngIf="f['password'].invalid || f['password'].errors?.['required']"
                                    class="text-red-500">*</span>
                            </label>
                            <button type="button" (click)="togglePasswordVisibility()"
                                class="absolute right-3 top-6 transform -translate-y-0 text-gray-400 hover:text-[#69f0ae] transition-colors duration-300">
                                <i [class]="showPassword ? 'fas fa-eye' : 'fas fa-eye-slash'"></i>
                            </button>
                        </div>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['password'].touched) && f['password'].errors?.['required']"
                                class="error-text">This field is required</p>
                            <p *ngIf="(submitted || f['password'].touched) && f['password'].errors?.['minlength']"
                                class="error-text">Min 4 characters</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div class="relative group">
                <nz-form-item>
                    <nz-form-control [nzSpan]="24">
                        <input type="number" placeholder=" " formControlName="mobNumber" class="peer form-input" />
                        <label class="form-label">
                            Mobile Number
                            <span *ngIf="f['mobNumber'].invalid || f['mobNumber'].errors?.['required']"
                                class="text-red-500">*</span>
                        </label>
                        <div class="mt-1">
                            <p *ngIf="(submitted || f['mobNumber'].touched) && f['mobNumber'].errors?.['required']"
                                class="error-text">This field is required</p>
                        </div>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>

        <button type="submit" class="mt-10 btn-primary" [disabled]="profileForm.invalid">
            <span class="relative z-10">Update Profile</span>
        </button>
    </form>
</div>